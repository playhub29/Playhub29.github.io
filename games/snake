<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Snake ‚Äì PlayHub</title>

<style>
body {
  margin: 0;
  background: #0b1020;
  color: #fff;
  font-family: Arial, sans-serif;
  display: flex;
  justify-content: center;
  align-items: center;
  height: 100vh;
}

.container {
  background: #1a1f3a;
  padding: 16px;
  border-radius: 16px;
  width: 320px;
  text-align: center;
}

.top {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 10px;
}

button {
  background: #5865f2;
  border: none;
  color: white;
  padding: 6px 10px;
  border-radius: 8px;
  cursor: pointer;
}

canvas {
  background: #000;
  border-radius: 10px;
}
</style>
</head>

<body>
<div class="container">
  <div class="top">
    <h2>Snake</h2>
    <button onclick="location.href='../../index.html'">üè† Home</button>
  </div>

  <canvas id="game" width="280" height="280"></canvas>
  <p id="status"></p>
</div>

<script>
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");

const size = 14;
const tiles = canvas.width / size;

let snake, food, dir, running;

function start() {
  snake = [{x:7,y:7}];
  dir = {x:1,y:0};
  placeFood();
  running = true;
  document.getElementById("status").textContent = "";
}

function placeFood() {
  food = {
    x: Math.floor(Math.random()*tiles),
    y: Math.floor(Math.random()*tiles)
  };
}

function loop() {
  if (!running) return;

  const head = {x: snake[0].x + dir.x, y: snake[0].y + dir.y};

  if (
    head.x < 0 || head.y < 0 ||
    head.x >= tiles || head.y >= tiles ||
    snake.some(s => s.x === head.x && s.y === head.y)
  ) {
    running = false;
    document.getElementById("status").textContent = "Game Over ‚Äî Refresh to restart";
    return;
  }

  snake.unshift(head);

  if (head.x === food.x && head.y === food.y) {
    placeFood();
  } else {
    snake.pop();
  }

  draw();
}

function draw() {
  ctx.fillStyle = "#000";
  ctx.fillRect(0,0,canvas.width,canvas.height);

  ctx.fillStyle = "#4ade80";
  snake.forEach(s =>
    ctx.fillRect(s.x*size, s.y*size, size-1, size-1)
  );

  ctx.fillStyle = "#f87171";
  ctx.fillRect(food.x*size, food.y*size, size-1, size-1);
}

document.addEventListener("keydown", e => {
  if (e.key==="ArrowUp" && dir.y===0) dir={x:0,y:-1};
  if (e.key==="ArrowDown" && dir.y===0) dir={x:0,y:1};
  if (e.key==="ArrowLeft" && dir.x===0) dir={x:-1,y:0};
  if (e.key==="ArrowRight" && dir.x===0) dir={x:1,y:0};
});

/* MOBILE SWIPE SUPPORT */
let startX, startY;
canvas.addEventListener("touchstart", e=>{
  startX=e.touches[0].clientX;
  startY=e.touches[0].clientY;
});

canvas.addEventListener("touchend", e=>{
  let dx=e.changedTouches[0].clientX-startX;
  let dy=e.changedTouches[0].clientY-startY;
  if(Math.abs(dx)>Math.abs(dy)){
    if(dx>0 && dir.x===0)dir={x:1,y:0};
    if(dx<0 && dir.x===0)dir={x:-1,y:0};
  } else {
    if(dy>0 && dir.y===0)dir={x:0,y:1};
    if(dy<0 && dir.y===0)dir={x:0,y:-1};
  }
});

start();
setInterval(loop,120);
</script>
</body>
</html>
